datatype CACHE_STATE = CACHE_I| CACHE_S| CACHE_E
datatype NODE_CMD = NODE_None| NODE_Get| NODE_GetX
datatype UNI_CMD = UNI_None| UNI_Get| UNI_GetX| UNI_Put| UNI_PutX| UNI_Nak
datatype INV_CMD = INV_None| INV_Inv| INV_InvAck
datatype RP_CMD = RP_None| RP_Replace
datatype WB_CMD = WB_None| WB_Wb
datatype SHWB_CMD = SHWB_None| SHWB_ShWb| SHWB_FAck
datatype NAKC_CMD = NAKC_None| NAKC_Nakc
type NODE=nat
type boolean=bool

class  class_0  {
var 
Cmd : NAKC_CMD
}


class  class_1  {
var 
HomeProc : boolean,
Proc : NODE,
Cmd : SHWB_CMD
}


class  class_2  {
var 
HomeInvSet : boolean,
InvSet : array<boolean>,
HomeShrSet : boolean,
ShrSet : array<boolean>,
ShrVld : boolean,
HomeHeadPtr : boolean,
HeadPtr : NODE,
HeadVld : boolean,
Dirty : boolean,
Local : boolean,
Pending : boolean
}


class  class_3  {
var 
CacheState : CACHE_STATE,
InvMarked : boolean,
ProcCmd : NODE_CMD
}


class  class_4  {
var 
NakcMsg_Cmd:NAKC_CMD,
ShWbMsg_HomeProc:boolean,
ShWbMsg_Proc:NODE,
ShWbMsg_Cmd:SHWB_CMD,
WbMsg_HomeProc:boolean,
WbMsg_Proc:NODE,
WbMsg_Cmd:WB_CMD,
HomeRpMsg_Cmd:RP_CMD,
RpMsg_Cmd:array<RP_CMD>,
HomeInvMsg_Cmd:INV_CMD,
InvMsg_Cmd:array<INV_CMD>,
HomeUniMsg_HomeProc:boolean,
HomeUniMsg_Proc:NODE,
HomeUniMsg_Cmd:UNI_CMD,
UniMsg_HomeProc:array<boolean>,
UniMsg_Proc:array<NODE>,
UniMsg_Cmd:array<UNI_CMD>,
Dir_HomeInvSet:boolean,
Dir_InvSet:boolean,
Dir_HomeShrSet:boolean,
Dir_ShrSet:boolean,
Dir_ShrVld:boolean,
Dir_HomeHeadPtr:boolean,
Dir_HeadPtr:NODE,
Dir_HeadVld:boolean,
Dir_Dirty:boolean,
Dir_Local:boolean,
Dir_Pending:boolean,
HomeProc_CacheState:CACHE_STATE,
HomeProc_InvMarked:boolean,
HomeProc_ProcCmd:NODE_CMD,
Proc_CacheState:array<CACHE_STATE>,
Proc_InvMarked:array<boolean>,
Proc_ProcCmd:array<NODE_CMD>
}
Sta_NakcMsg:,
Sta_ShWbMsg:,
Sta_WbMsg:,
Sta_HomeRpMsg:,
Sta_RpMsg:,
Sta_HomeInvMsg:,
Sta_InvMsg:,
Sta_HomeUniMsg:,
Sta_UniMsg:,
Sta_Dir:,
Sta_HomeProc:,
Sta_Proc:

//end
method n_PI_Remote_Getinv__109_0(        
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_CacheState[src] == CACHE_I) && (Sta_Proc_ProcCmd[src] == NODE_None)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
{
  Sta_Proc_ProcCmd[src] := NODE_Get;
  Sta_UniMsg_Cmd[src] := UNI_Get;
  Sta_UniMsg_HomeProc[src] := true;
}

method n_PI_Remote_Getinv__109_1(        
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
//case 1
requires ((Sta_Proc_CacheState[src] == CACHE_I) && (Sta_Proc_ProcCmd[src] == NODE_None)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
{
  Sta_Proc_ProcCmd[src] := NODE_Get;
  Sta_UniMsg_Cmd[src] := UNI_Get;
  Sta_UniMsg_HomeProc[src] := true;
}

method n_PI_Remote_Getinv__109_2(        
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_CacheState[src] == CACHE_I) && (Sta_Proc_ProcCmd[src] == NODE_None)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
{
  Sta_Proc_ProcCmd[src] := NODE_Get;
  Sta_UniMsg_Cmd[src] := UNI_Get;
  Sta_UniMsg_HomeProc[src] := true;
}


method n_PI_Remote_GetXinv__109_0(        
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_CacheState[src] == CACHE_I) && (Sta_Proc_ProcCmd[src] == NODE_None)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
{
  Sta_Proc_ProcCmd[src] := NODE_GetX;
  Sta_UniMsg_Cmd[src] := UNI_GetX;
  Sta_UniMsg_HomeProc[src] := true;
}

method n_PI_Remote_GetXinv__109_1(        
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
//case 1
requires ((Sta_Proc_CacheState[src] == CACHE_I) && (Sta_Proc_ProcCmd[src] == NODE_None)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
{
  Sta_Proc_ProcCmd[src] := NODE_GetX;
  Sta_UniMsg_Cmd[src] := UNI_GetX;
  Sta_UniMsg_HomeProc[src] := true;
}

method n_PI_Remote_GetXinv__109_2(        
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_CacheState[src] == CACHE_I) && (Sta_Proc_ProcCmd[src] == NODE_None)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
{
  Sta_Proc_ProcCmd[src] := NODE_GetX;
  Sta_UniMsg_Cmd[src] := UNI_GetX;
  Sta_UniMsg_HomeProc[src] := true;
}


method n_NI_Nakinv__109_0(        
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


















requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires dst==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires (Sta_UniMsg_Cmd[dst] == UNI_Nak) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_InvMarked
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[dst] := UNI_None;
  Sta_Proc_ProcCmd[dst] := NODE_None;
  Sta_Proc_InvMarked[dst] := false;
}

method n_NI_Nakinv__109_1(        
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


















requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires dst==p__Inv3
//case 1
requires (Sta_UniMsg_Cmd[dst] == UNI_Nak) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_InvMarked
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[dst] := UNI_None;
  Sta_Proc_ProcCmd[dst] := NODE_None;
  Sta_Proc_InvMarked[dst] := false;
}

method n_NI_Nakinv__109_2(        
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


















requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires dst!=p__Inv3&&dst!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires (Sta_UniMsg_Cmd[dst] == UNI_Nak) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_InvMarked
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[dst] := UNI_None;
  Sta_Proc_ProcCmd[dst] := NODE_None;
  Sta_Proc_InvMarked[dst] := false;
}


method n_NI_Local_Get_Nak__part__0inv__109_0(         
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (Sta_Dir_Pending[0] == true)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}

method n_NI_Local_Get_Nak__part__0inv__109_1(         
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
//case 1
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (Sta_Dir_Pending[0] == true)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}

method n_NI_Local_Get_Nak__part__0inv__109_2(         
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (Sta_Dir_Pending[0] == true)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}


method n_NI_Local_Get_Nak__part__1inv__109_0(            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_Local[0] == false))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}

method n_NI_Local_Get_Nak__part__1inv__109_1(            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
//case 1
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_Local[0] == false))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}

method n_NI_Local_Get_Nak__part__1inv__109_2(            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_Local[0] == false))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}


method n_NI_Local_Get_Nak__part__2inv__109_0(           
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == true) && (!(Sta_HomeProc_CacheState[0] == CACHE_E)))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}

method n_NI_Local_Get_Nak__part__2inv__109_1(           
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
//case 1
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == true) && (!(Sta_HomeProc_CacheState[0] == CACHE_E)))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}

method n_NI_Local_Get_Nak__part__2inv__109_2(           
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == true) && (!(Sta_HomeProc_CacheState[0] == CACHE_E)))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}


method n_NI_Local_Get_Get__part__0inv__109_0(              
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)






























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (Sta_Dir_HomeHeadPtr[0] == true)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
modifies Sta_UniMsg_Proc
{
  Sta_Dir_Pending[0] := true;
  Sta_UniMsg_Cmd[src] := UNI_Get;
  Sta_UniMsg_Proc[src] := Sta_Dir_HeadPtr[0];
  Sta_UniMsg_HomeProc[src] := Sta_Dir_HomeHeadPtr[0];
}

method n_NI_Local_Get_Get__part__0inv__109_1(              
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)






























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
//case 1
requires ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (Sta_Dir_HomeHeadPtr[0] == true)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
modifies Sta_UniMsg_Proc
{
  Sta_Dir_Pending[0] := true;
  Sta_UniMsg_Cmd[src] := UNI_Get;
  Sta_UniMsg_Proc[src] := Sta_Dir_HeadPtr[0];
  Sta_UniMsg_HomeProc[src] := Sta_Dir_HomeHeadPtr[0];
}

method n_NI_Local_Get_Get__part__0inv__109_2(              
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)






























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (Sta_Dir_HomeHeadPtr[0] == true)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
modifies Sta_UniMsg_Proc
{
  Sta_Dir_Pending[0] := true;
  Sta_UniMsg_Cmd[src] := UNI_Get;
  Sta_UniMsg_Proc[src] := Sta_Dir_HeadPtr[0];
  Sta_UniMsg_HomeProc[src] := Sta_Dir_HomeHeadPtr[0];
}


method n_NI_Local_Get_Get__part__1inv__109_0(              
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)






























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (!(Sta_Dir_HeadPtr[0] == src))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
modifies Sta_UniMsg_Proc
{
  Sta_Dir_Pending[0] := true;
  Sta_UniMsg_Cmd[src] := UNI_Get;
  Sta_UniMsg_Proc[src] := Sta_Dir_HeadPtr[0];
  Sta_UniMsg_HomeProc[src] := Sta_Dir_HomeHeadPtr[0];
}

method n_NI_Local_Get_Get__part__1inv__109_1(              
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)






























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires (!((Sta_Dir_InvSet[p__Inv4] == true) && (Sta_Dir_Dirty[0] == true) && (Sta_Dir_Pending[0] == false)))//case 3
requires ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (!(Sta_Dir_HeadPtr[0] == src))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
modifies Sta_UniMsg_Proc
{
  Sta_Dir_Pending[0] := true;
  Sta_UniMsg_Cmd[src] := UNI_Get;
  Sta_UniMsg_Proc[src] := Sta_Dir_HeadPtr[0];
  Sta_UniMsg_HomeProc[src] := Sta_Dir_HomeHeadPtr[0];
}

method n_NI_Local_Get_Get__part__1inv__109_2(              
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)






























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (!(Sta_Dir_HeadPtr[0] == src))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
modifies Sta_UniMsg_Proc
{
  Sta_Dir_Pending[0] := true;
  Sta_UniMsg_Cmd[src] := UNI_Get;
  Sta_UniMsg_Proc[src] := Sta_Dir_HeadPtr[0];
  Sta_UniMsg_HomeProc[src] := Sta_Dir_HomeHeadPtr[0];
}


method n_NI_Local_Get_Put__part__0inv__109_0(                   
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)








































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (Sta_Dir_Dirty[0] == true)//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__0inv__109_1(                   
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)








































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__0inv__109_2(                   
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)








































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__0inv__109_3(                   
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)








































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires (Sta_Dir_Dirty[0] == true)//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__0inv__109_4(                   
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)








































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__0inv__109_5(                   
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)








































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__0inv__109_6(                   
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)








































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__0inv__109_7(                   
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)








































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (Sta_Dir_Dirty[0] == true)//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__0inv__109_8(                   
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)








































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_ShrSet[p__Inv4] == true)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__0inv__109_9(                   
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)








































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__0inv__109_10(                   
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)








































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}


method n_NI_Local_Get_Put__part__1inv__109_0(                    
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)










































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (Sta_Dir_Dirty[0] == true)//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__1inv__109_1(                    
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)










































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_HeadVld[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__1inv__109_2(                    
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)










































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__1inv__109_3(                    
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)










































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires (Sta_Dir_Dirty[0] == true)//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__1inv__109_4(                    
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)










































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__1inv__109_5(                    
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)










































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__1inv__109_6(                    
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)










































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__1inv__109_7(                    
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)










































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (Sta_Dir_Dirty[0] == true)//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__1inv__109_8(                    
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)










































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__1inv__109_9(                    
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)










































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}

method n_NI_Local_Get_Put__part__1inv__109_10(                    
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)










































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_RpMsg_Cmd[src] == RP_Replace)) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeProc_CacheState
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Dirty[0] := false;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_S;
    Sta_UniMsg_Cmd[src] := UNI_Put;}
else{
    if (Sta_Dir_HeadVld[0] == true) {
      Sta_Dir_ShrVld[0] := true;
      Sta_Dir_ShrSet[src] := true;
      forall p  |0<= p<N0 {
        if ((p == src) || (Sta_Dir_ShrSet[p] == true)) {
          Sta_Dir_InvSet[p] := true;}
else{
          Sta_Dir_InvSet[p] := false;
        }
      }
      Sta_Dir_HomeInvSet[0] := Sta_Dir_HomeShrSet[0];}
else{
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
    }
    Sta_UniMsg_Cmd[src] := UNI_Put;
  }
}


method n_NI_Remote_Get_Nakinv__109_0(           
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4&&dst==p__Inv3
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E)) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_NakcMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}

method n_NI_Remote_Get_Nakinv__109_1(           
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3&&dst==p__Inv4
//case 1
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E)) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_NakcMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}

method n_NI_Remote_Get_Nakinv__109_2(           
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4&&dst!=p__Inv3&&dst!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E)) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_NakcMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}

method n_NI_Remote_Get_Nakinv__109_3(           
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4&&dst==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E)) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_NakcMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}

method n_NI_Remote_Get_Nakinv__109_4(           
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3&&dst!=p__Inv3&&dst!=p__Inv4
//case 1
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E)) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_NakcMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}

method n_NI_Remote_Get_Nakinv__109_5(           
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4&&dst==p__Inv3
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E)) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_NakcMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}

method n_NI_Remote_Get_Nakinv__109_6(           
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4&&dst!=p__Inv3&&dst!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E)) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_NakcMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}


method n_NI_Remote_Get_Putinv__109_0(             
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4&&dst==p__Inv3
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc
modifies Sta_UniMsg_Cmd
{
  Sta_Proc_CacheState[dst] := CACHE_S;
  Sta_UniMsg_Cmd[src] := UNI_Put;
  Sta_ShWbMsg_Cmd[0] := SHWB_ShWb;
  Sta_ShWbMsg_Proc[0] := src;
  Sta_ShWbMsg_HomeProc[0] := false;
}

method n_NI_Remote_Get_Putinv__109_1(             
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3&&dst==p__Inv4
//case 1
requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc
modifies Sta_UniMsg_Cmd
{
  Sta_Proc_CacheState[dst] := CACHE_S;
  Sta_UniMsg_Cmd[src] := UNI_Put;
  Sta_ShWbMsg_Cmd[0] := SHWB_ShWb;
  Sta_ShWbMsg_Proc[0] := src;
  Sta_ShWbMsg_HomeProc[0] := false;
}

method n_NI_Remote_Get_Putinv__109_2(             
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4&&dst!=p__Inv3&&dst!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc
modifies Sta_UniMsg_Cmd
{
  Sta_Proc_CacheState[dst] := CACHE_S;
  Sta_UniMsg_Cmd[src] := UNI_Put;
  Sta_ShWbMsg_Cmd[0] := SHWB_ShWb;
  Sta_ShWbMsg_Proc[0] := src;
  Sta_ShWbMsg_HomeProc[0] := false;
}

method n_NI_Remote_Get_Putinv__109_3(             
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4&&dst==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc
modifies Sta_UniMsg_Cmd
{
  Sta_Proc_CacheState[dst] := CACHE_S;
  Sta_UniMsg_Cmd[src] := UNI_Put;
  Sta_ShWbMsg_Cmd[0] := SHWB_ShWb;
  Sta_ShWbMsg_Proc[0] := src;
  Sta_ShWbMsg_HomeProc[0] := false;
}

method n_NI_Remote_Get_Putinv__109_4(             
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3&&dst!=p__Inv3&&dst!=p__Inv4
//case 1
requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc
modifies Sta_UniMsg_Cmd
{
  Sta_Proc_CacheState[dst] := CACHE_S;
  Sta_UniMsg_Cmd[src] := UNI_Put;
  Sta_ShWbMsg_Cmd[0] := SHWB_ShWb;
  Sta_ShWbMsg_Proc[0] := src;
  Sta_ShWbMsg_HomeProc[0] := false;
}

method n_NI_Remote_Get_Putinv__109_5(             
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4&&dst==p__Inv3
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc
modifies Sta_UniMsg_Cmd
{
  Sta_Proc_CacheState[dst] := CACHE_S;
  Sta_UniMsg_Cmd[src] := UNI_Put;
  Sta_ShWbMsg_Cmd[0] := SHWB_ShWb;
  Sta_ShWbMsg_Proc[0] := src;
  Sta_ShWbMsg_HomeProc[0] := false;
}

method n_NI_Remote_Get_Putinv__109_6(             
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4&&dst!=p__Inv3&&dst!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_UniMsg_Cmd[src] == UNI_Get) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc
modifies Sta_UniMsg_Cmd
{
  Sta_Proc_CacheState[dst] := CACHE_S;
  Sta_UniMsg_Cmd[src] := UNI_Put;
  Sta_ShWbMsg_Cmd[0] := SHWB_ShWb;
  Sta_ShWbMsg_Proc[0] := src;
  Sta_ShWbMsg_HomeProc[0] := false;
}


method n_NI_Local_GetX_Nak__part__0inv__109_0(        
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (Sta_Dir_Pending[0] == true)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}

method n_NI_Local_GetX_Nak__part__0inv__109_1(        
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
//case 1
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (Sta_Dir_Pending[0] == true)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}

method n_NI_Local_GetX_Nak__part__0inv__109_2(        
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (Sta_Dir_Pending[0] == true)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}


method n_NI_Local_GetX_Nak__part__1inv__109_0(           
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_Local[0] == false))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}

method n_NI_Local_GetX_Nak__part__1inv__109_1(           
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
//case 1
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_Local[0] == false))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}

method n_NI_Local_GetX_Nak__part__1inv__109_2(           
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_Local[0] == false))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}


method n_NI_Local_GetX_Nak__part__2inv__109_0(          
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)






















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == true) && (!(Sta_HomeProc_CacheState[0] == CACHE_E)))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}

method n_NI_Local_GetX_Nak__part__2inv__109_1(          
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)






















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
//case 1
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == true) && (!(Sta_HomeProc_CacheState[0] == CACHE_E)))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}

method n_NI_Local_GetX_Nak__part__2inv__109_2(          
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)






















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == true) && (!(Sta_HomeProc_CacheState[0] == CACHE_E)))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
}


method n_NI_Local_GetX_GetX__part__0inv__109_0(             
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (Sta_Dir_HomeHeadPtr[0] == true)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
modifies Sta_UniMsg_Proc
{
  Sta_Dir_Pending[0] := true;
  Sta_UniMsg_Cmd[src] := UNI_GetX;
  Sta_UniMsg_Proc[src] := Sta_Dir_HeadPtr[0];
  Sta_UniMsg_HomeProc[src] := Sta_Dir_HomeHeadPtr[0];
}

method n_NI_Local_GetX_GetX__part__0inv__109_1(             
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
//case 1
requires ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (Sta_Dir_HomeHeadPtr[0] == true)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
modifies Sta_UniMsg_Proc
{
  Sta_Dir_Pending[0] := true;
  Sta_UniMsg_Cmd[src] := UNI_GetX;
  Sta_UniMsg_Proc[src] := Sta_Dir_HeadPtr[0];
  Sta_UniMsg_HomeProc[src] := Sta_Dir_HomeHeadPtr[0];
}

method n_NI_Local_GetX_GetX__part__0inv__109_2(             
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (Sta_Dir_HomeHeadPtr[0] == true)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
modifies Sta_UniMsg_Proc
{
  Sta_Dir_Pending[0] := true;
  Sta_UniMsg_Cmd[src] := UNI_GetX;
  Sta_UniMsg_Proc[src] := Sta_Dir_HeadPtr[0];
  Sta_UniMsg_HomeProc[src] := Sta_Dir_HomeHeadPtr[0];
}


method n_NI_Local_GetX_GetX__part__1inv__109_0(             
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_HeadPtr[0] == src))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
modifies Sta_UniMsg_Proc
{
  Sta_Dir_Pending[0] := true;
  Sta_UniMsg_Cmd[src] := UNI_GetX;
  Sta_UniMsg_Proc[src] := Sta_Dir_HeadPtr[0];
  Sta_UniMsg_HomeProc[src] := Sta_Dir_HomeHeadPtr[0];
}

method n_NI_Local_GetX_GetX__part__1inv__109_1(             
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
//case 1
requires ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_HeadPtr[0] == src))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
modifies Sta_UniMsg_Proc
{
  Sta_Dir_Pending[0] := true;
  Sta_UniMsg_Cmd[src] := UNI_GetX;
  Sta_UniMsg_Proc[src] := Sta_Dir_HeadPtr[0];
  Sta_UniMsg_HomeProc[src] := Sta_Dir_HomeHeadPtr[0];
}

method n_NI_Local_GetX_GetX__part__1inv__109_2(             
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Local[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_HeadPtr[0] == src))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_UniMsg_Cmd
modifies Sta_UniMsg_HomeProc
modifies Sta_UniMsg_Proc
{
  Sta_Dir_Pending[0] := true;
  Sta_UniMsg_Cmd[src] := UNI_GetX;
  Sta_UniMsg_Proc[src] := Sta_Dir_HeadPtr[0];
  Sta_UniMsg_HomeProc[src] := Sta_Dir_HomeHeadPtr[0];
}


method n_NI_Local_GetX_PutX__part__0inv__109_0(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (Sta_Dir_Dirty[0] == true)//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_1(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_2(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_ShrSet[p__Inv3] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_HomeShrSet[0] == false) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_3(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_4(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_5(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv3] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_6(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_7(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_8(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_9(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_10(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires (Sta_Dir_Dirty[0] == true)//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_11(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_12(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadPtr[0] == p__Inv3) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_ShrSet[p__Inv4] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_HomeShrSet[0] == false) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_13(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadPtr[0] == p__Inv3) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_ShrSet[p__Inv4] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_HomeShrSet[0] == false) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_14(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadPtr[0] == p__Inv3) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_ShrSet[p__Inv4] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_HomeShrSet[0] == false) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_15(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_16(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_17(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_18(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_19(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_20(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_21(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_22(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_23(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_24(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_25(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_26(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_27(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_28(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_29(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_30(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_31(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_32(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_33(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_34(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_35(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_36(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_37(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_38(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_39(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_40(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_41(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_42(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_43(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_44(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_45(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_46(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_47(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_48(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_49(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_50(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_51(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_52(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_53(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_54(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_55(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_56(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_57(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_58(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_59(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_60(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_61(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_62(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_63(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_64(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_65(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_66(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_67(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_68(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_69(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_70(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_71(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_72(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_73(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_74(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_75(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_76(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_77(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_78(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_79(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_80(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_81(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_82(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_83(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_84(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_85(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_86(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_87(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_88(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_89(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_90(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_91(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_92(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_93(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_94(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_95(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_96(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_97(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_98(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_99(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_100(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_101(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_102(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_103(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_104(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_105(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_106(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_107(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_108(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_109(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_110(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_111(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_112(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_113(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_114(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_115(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_116(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_117(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_118(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_119(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_120(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_121(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_122(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_123(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_124(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_125(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_126(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_127(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_128(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_129(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_130(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_131(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_132(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_133(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_134(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_135(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_136(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_137(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_138(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_139(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_140(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_141(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_142(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_143(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_144(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_145(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_146(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_147(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_148(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_149(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_150(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_151(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_152(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_153(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_154(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_155(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_156(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_157(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_158(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_159(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_160(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_161(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_162(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_163(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_164(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_165(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_166(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_167(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_168(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_169(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_170(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_171(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_172(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_173(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_174(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_175(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_176(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_177(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_178(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_179(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_180(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_181(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_182(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_183(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_184(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_185(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_186(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_187(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_188(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_189(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_190(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_191(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_192(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_193(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_194(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_195(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_196(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_197(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_198(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_199(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_200(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_201(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_202(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_203(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_204(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_205(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_206(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_207(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_208(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_209(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_210(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_211(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_212(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_213(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_214(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_215(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_216(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_217(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_218(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_219(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_220(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_221(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_222(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_223(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_224(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_225(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_226(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_227(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_228(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_229(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_230(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_231(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_232(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_233(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_234(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_235(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_236(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_237(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_238(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_239(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_240(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_241(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_242(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_243(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_244(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_245(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_246(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_247(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_248(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_249(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_250(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_251(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_252(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_253(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_254(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_255(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_256(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_257(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_258(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_259(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_260(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_261(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_262(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_263(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_264(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_265(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_266(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_267(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_268(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_269(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_270(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (Sta_Dir_Dirty[0] == true)//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_271(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_272(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_ShrSet[p__Inv4] == false) && (Sta_Dir_ShrSet[p__Inv3] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_HomeShrSet[0] == false) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_273(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == src)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_ShrVld[0] == true)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_274(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_HomeHeadPtr[0] == true)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_275(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_ShrVld[0] == true)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_276(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv3] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_ShrVld[0] == true)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_277(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_ShrVld[0] == true)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_278(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_ShrVld[0] == true)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_279(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!(Sta_Dir_HomeShrSet[0] == true))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_280(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HeadPtr[0] == src)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_281(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_ShrSet[p__Inv4] == true)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_282(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv3] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_ShrSet[p__Inv3] == true)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_283(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_ShrSet[p__Inv1] == true)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_284(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_ShrSet[p__Inv0] == true)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_285(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!(Sta_Dir_HomeShrSet[0] == true))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_286(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == src)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_287(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_288(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_289(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv3] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_290(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_291(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_292(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_293(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == src)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_294(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_295(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv3] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_296(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_297(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_298(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_299(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == src)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_300(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_301(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_302(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv3] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_303(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_304(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_305(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_306(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == src)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_307(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_308(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv3] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_309(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_310(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__0inv__109_311(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && (!(Sta_Dir_Dirty[0] == true))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}


method n_NI_Local_GetX_PutX__part__1inv__109_0(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (Sta_Dir_Dirty[0] == true)//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_1(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_2(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_ShrSet[p__Inv3] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_HomeShrSet[0] == false) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_3(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_4(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_5(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv3] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_6(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_7(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_8(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_9(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_10(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires (Sta_Dir_Dirty[0] == true)//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_11(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_12(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadPtr[0] == p__Inv3) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_ShrSet[p__Inv4] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_HomeShrSet[0] == false) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_13(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadPtr[0] == p__Inv3) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_ShrSet[p__Inv4] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_HomeShrSet[0] == false) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_14(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadPtr[0] == p__Inv3) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_ShrSet[p__Inv4] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_HomeShrSet[0] == false) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_15(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_16(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_17(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_18(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_19(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_20(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_21(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_22(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_23(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_24(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_25(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_26(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_27(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_28(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_29(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_30(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_31(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_32(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_33(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_34(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_35(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_36(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_37(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_38(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_39(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_40(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_41(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_42(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_43(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_44(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_45(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_46(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_47(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_48(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_49(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_50(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_51(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_52(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_53(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_54(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_55(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_56(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_57(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_58(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_59(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_60(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_61(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_62(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_63(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_64(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_65(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_66(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_67(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_68(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_69(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_70(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_71(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_72(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_73(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_74(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_75(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_76(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_77(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_78(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_79(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_80(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_81(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_82(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_83(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_84(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_85(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_86(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_87(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_88(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_89(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_90(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_91(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_92(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_93(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_94(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_95(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_96(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_97(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_98(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_99(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_100(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_101(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_102(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_103(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_104(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_105(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_106(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_107(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_108(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_109(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_110(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_111(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_112(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_113(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_114(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_115(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_116(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_117(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_118(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_119(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_120(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_121(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_122(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_123(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_124(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_125(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_126(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_127(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_128(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_129(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_130(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_131(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_132(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_133(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_134(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_135(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_136(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_137(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_138(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_139(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_140(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_141(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_142(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_143(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_144(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_145(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_146(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_147(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_148(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_149(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_150(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_151(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_152(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_153(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_154(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_155(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_156(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_157(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_158(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_159(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_160(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_161(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_162(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_163(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_164(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_165(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_166(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_167(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_168(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_169(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_170(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_171(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_172(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_173(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_174(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_175(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_176(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_177(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_178(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_179(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_180(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_181(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_182(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_183(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_184(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_185(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_186(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_187(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_188(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_189(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_190(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_191(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_192(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_193(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_194(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_195(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_196(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_197(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_198(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_199(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_200(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_201(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_202(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_203(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_204(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_205(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_206(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_207(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_208(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_209(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_210(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_211(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_212(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_213(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_214(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_215(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_216(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_217(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_218(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_219(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_220(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_221(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_222(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_223(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_224(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_225(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_226(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_227(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_228(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_229(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_230(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_231(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_232(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_233(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_234(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_235(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_236(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_237(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_238(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_239(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_240(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_241(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_242(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_243(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_244(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_245(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_246(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_247(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_248(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_249(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_250(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_251(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_252(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_253(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_254(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_255(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_256(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_257(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_258(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_259(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_260(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_261(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_262(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_263(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_264(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == p__Inv3)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_265(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_266(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_267(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_268(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_269(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires ((Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_270(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (Sta_Dir_Dirty[0] == true)//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_271(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_HeadVld[0] == true)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_272(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false) && (Sta_Dir_ShrSet[p__Inv4] == false) && (Sta_Dir_ShrSet[p__Inv3] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_ShrSet[p] == false) && (Sta_Dir_HomeShrSet[0] == false) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_273(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == src)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_ShrVld[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_274(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_HomeHeadPtr[0] == true)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_275(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_ShrVld[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_276(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv3] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_ShrVld[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_277(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_ShrVld[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_278(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_ShrVld[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_279(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!(Sta_Dir_HomeShrSet[0] == true))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_280(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HeadPtr[0] == src)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_HeadVld[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_281(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_HeadVld[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_282(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p__Inv3] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_HeadVld[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_283(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_HeadVld[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_284(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!((Sta_Dir_HeadVld[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E)))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_285(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
requires (!(Sta_Dir_HomeShrSet[0] == true))//case 3
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_286(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == src)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_287(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_288(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_289(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv3] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_290(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_291(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_292(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_293(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == src)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_294(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_295(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv3] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_296(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_297(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_298(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_299(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == src)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_300(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_301(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv4] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_302(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv3] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_303(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_304(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_305(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_306(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HeadPtr[0] == src)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_307(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_308(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p__Inv3] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_309(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_310(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_ShrSet[p] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}

method n_NI_Local_GetX_PutX__part__1inv__109_311(                            
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true) && (!(Sta_Dir_HomeShrSet[0] == false)) && (!(Sta_Dir_Dirty[0] == true)))//branch
//case 1
requires ((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == true) && ((Sta_Dir_Local[0] == true) && (Sta_HomeProc_CacheState[0] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := true;
    Sta_Dir_HeadVld[0] := true;
    Sta_Dir_HeadPtr[0] := src;
    Sta_Dir_HomeHeadPtr[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_UniMsg_Cmd[src] := UNI_PutX;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    if ((Sta_Dir_HeadVld[0] == true) ==> ((((Sta_Dir_HeadPtr[0] == src) && (Sta_Dir_HomeHeadPtr[0] == false)) && (forall p  |0<= p<N0 :: ((!(p == src)) ==> (Sta_Dir_ShrSet[p] == false)) )) && (Sta_Dir_HomeShrSet[0] == false))) {
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        Sta_Dir_InvSet[p] := false;
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      Sta_HomeProc_CacheState[0] := CACHE_I;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }}
else{
      Sta_Dir_Pending[0] := true;
      Sta_Dir_Local[0] := false;
      Sta_Dir_Dirty[0] := true;
      Sta_Dir_HeadVld[0] := true;
      Sta_Dir_HeadPtr[0] := src;
      Sta_Dir_HomeHeadPtr[0] := false;
      Sta_Dir_ShrVld[0] := false;
      forall p  |0<= p<N0 {
        Sta_Dir_ShrSet[p] := false;
        if ((!(p == src)) && (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false)))) {
          Sta_Dir_InvSet[p] := true;
          Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
          Sta_Dir_InvSet[p] := false;
          Sta_InvMsg_Cmd[p] := INV_None;
        }
      }
      Sta_Dir_HomeShrSet[0] := false;
      Sta_Dir_HomeInvSet[0] := false;
      Sta_HomeInvMsg_Cmd[0] := INV_None;
      Sta_UniMsg_Cmd[src] := UNI_PutX;
      if (Sta_Dir_Local[0] == true) {
        Sta_HomeProc_CacheState[0] := CACHE_I;
        if (Sta_HomeProc_ProcCmd[0] == NODE_Get) {
          Sta_HomeProc_InvMarked[0] := true;
        }
      }
    }
  }
}


method n_NI_Remote_GetX_Nakinv__109_0(           
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4&&dst==p__Inv3
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E)) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_NakcMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}

method n_NI_Remote_GetX_Nakinv__109_1(           
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3&&dst==p__Inv4
//case 1
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E)) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_NakcMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}

method n_NI_Remote_GetX_Nakinv__109_2(           
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4&&dst!=p__Inv3&&dst!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E)) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_NakcMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}

method n_NI_Remote_GetX_Nakinv__109_3(           
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4&&dst==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E)) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_NakcMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}

method n_NI_Remote_GetX_Nakinv__109_4(           
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3&&dst!=p__Inv3&&dst!=p__Inv4
//case 1
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E)) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_NakcMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}

method n_NI_Remote_GetX_Nakinv__109_5(           
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4&&dst==p__Inv3
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E)) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_NakcMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}

method n_NI_Remote_GetX_Nakinv__109_6(           
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4&&dst!=p__Inv3&&dst!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E)) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_NakcMsg_Cmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[src] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}


method n_NI_Remote_GetX_PutXinv__109_0(             
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4&&dst==p__Inv3
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc
modifies Sta_UniMsg_Cmd
{
  Sta_Proc_CacheState[dst] := CACHE_I;
  Sta_UniMsg_Cmd[src] := UNI_PutX;
  Sta_ShWbMsg_Cmd[0] := SHWB_FAck;
  Sta_ShWbMsg_Proc[0] := src;
  Sta_ShWbMsg_HomeProc[0] := false;
}

method n_NI_Remote_GetX_PutXinv__109_1(             
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3&&dst==p__Inv4
//case 1
requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc
modifies Sta_UniMsg_Cmd
{
  Sta_Proc_CacheState[dst] := CACHE_I;
  Sta_UniMsg_Cmd[src] := UNI_PutX;
  Sta_ShWbMsg_Cmd[0] := SHWB_FAck;
  Sta_ShWbMsg_Proc[0] := src;
  Sta_ShWbMsg_HomeProc[0] := false;
}

method n_NI_Remote_GetX_PutXinv__109_2(             
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4&&dst!=p__Inv3&&dst!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc
modifies Sta_UniMsg_Cmd
{
  Sta_Proc_CacheState[dst] := CACHE_I;
  Sta_UniMsg_Cmd[src] := UNI_PutX;
  Sta_ShWbMsg_Cmd[0] := SHWB_FAck;
  Sta_ShWbMsg_Proc[0] := src;
  Sta_ShWbMsg_HomeProc[0] := false;
}

method n_NI_Remote_GetX_PutXinv__109_3(             
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4&&dst==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc
modifies Sta_UniMsg_Cmd
{
  Sta_Proc_CacheState[dst] := CACHE_I;
  Sta_UniMsg_Cmd[src] := UNI_PutX;
  Sta_ShWbMsg_Cmd[0] := SHWB_FAck;
  Sta_ShWbMsg_Proc[0] := src;
  Sta_ShWbMsg_HomeProc[0] := false;
}

method n_NI_Remote_GetX_PutXinv__109_4(             
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3&&dst!=p__Inv3&&dst!=p__Inv4
//case 1
requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc
modifies Sta_UniMsg_Cmd
{
  Sta_Proc_CacheState[dst] := CACHE_I;
  Sta_UniMsg_Cmd[src] := UNI_PutX;
  Sta_ShWbMsg_Cmd[0] := SHWB_FAck;
  Sta_ShWbMsg_Proc[0] := src;
  Sta_ShWbMsg_HomeProc[0] := false;
}

method n_NI_Remote_GetX_PutXinv__109_5(             
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4&&dst==p__Inv3
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc
modifies Sta_UniMsg_Cmd
{
  Sta_Proc_CacheState[dst] := CACHE_I;
  Sta_UniMsg_Cmd[src] := UNI_PutX;
  Sta_ShWbMsg_Cmd[0] := SHWB_FAck;
  Sta_ShWbMsg_Proc[0] := src;
  Sta_ShWbMsg_HomeProc[0] := false;
}

method n_NI_Remote_GetX_PutXinv__109_6(             
src:nat, N0:nat,dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




























requires 0<=src<N0
requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4&&dst!=p__Inv3&&dst!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_UniMsg_Cmd[src] == UNI_GetX) && (Sta_UniMsg_HomeProc[src] == false) && (Sta_UniMsg_Proc[src] == dst) && (!(src == dst))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc
modifies Sta_UniMsg_Cmd
{
  Sta_Proc_CacheState[dst] := CACHE_I;
  Sta_UniMsg_Cmd[src] := UNI_PutX;
  Sta_ShWbMsg_Cmd[0] := SHWB_FAck;
  Sta_ShWbMsg_Proc[0] := src;
  Sta_ShWbMsg_HomeProc[0] := false;
}


method n_NI_Remote_Putinv__109_0(         
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




















requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires dst==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires (Sta_UniMsg_Cmd[dst] == UNI_Put) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_Proc_InvMarked
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[dst] := UNI_None;
  Sta_Proc_ProcCmd[dst] := NODE_None;
  if (Sta_Proc_InvMarked[dst] == true) {
    Sta_Proc_InvMarked[dst] := false;
    Sta_Proc_CacheState[dst] := CACHE_I;}
else{
    Sta_Proc_CacheState[dst] := CACHE_S;
  }
}

method n_NI_Remote_Putinv__109_1(         
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




















requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires dst==p__Inv3
//case 1
requires (Sta_UniMsg_Cmd[dst] == UNI_Put) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_Proc_InvMarked
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[dst] := UNI_None;
  Sta_Proc_ProcCmd[dst] := NODE_None;
  if (Sta_Proc_InvMarked[dst] == true) {
    Sta_Proc_InvMarked[dst] := false;
    Sta_Proc_CacheState[dst] := CACHE_I;}
else{
    Sta_Proc_CacheState[dst] := CACHE_S;
  }
}

method n_NI_Remote_Putinv__109_2(         
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




















requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires dst!=p__Inv3&&dst!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires (Sta_UniMsg_Cmd[dst] == UNI_Put) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_Proc_InvMarked
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[dst] := UNI_None;
  Sta_Proc_ProcCmd[dst] := NODE_None;
  if (Sta_Proc_InvMarked[dst] == true) {
    Sta_Proc_InvMarked[dst] := false;
    Sta_Proc_CacheState[dst] := CACHE_I;}
else{
    Sta_Proc_CacheState[dst] := CACHE_S;
  }
}


method n_NI_Remote_PutXinv__109_0(         
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




















requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires dst==p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_ProcCmd[dst] == NODE_GetX) && (Sta_UniMsg_Cmd[dst] == UNI_PutX)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_Proc_InvMarked
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[dst] := UNI_None;
  Sta_Proc_ProcCmd[dst] := NODE_None;
  Sta_Proc_InvMarked[dst] := false;
  Sta_Proc_CacheState[dst] := CACHE_E;
}

method n_NI_Remote_PutXinv__109_1(         
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




















requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires dst==p__Inv3
//case 1
requires ((Sta_Proc_ProcCmd[dst] == NODE_GetX) && (Sta_UniMsg_Cmd[dst] == UNI_PutX)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_Proc_InvMarked
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[dst] := UNI_None;
  Sta_Proc_ProcCmd[dst] := NODE_None;
  Sta_Proc_InvMarked[dst] := false;
  Sta_Proc_CacheState[dst] := CACHE_E;
}

method n_NI_Remote_PutXinv__109_2(         
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




















requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires dst!=p__Inv3&&dst!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Proc_ProcCmd[dst] == NODE_GetX) && (Sta_UniMsg_Cmd[dst] == UNI_PutX)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_Proc_InvMarked
modifies Sta_Proc_ProcCmd
modifies Sta_UniMsg_Cmd
{
  Sta_UniMsg_Cmd[dst] := UNI_None;
  Sta_Proc_ProcCmd[dst] := NODE_None;
  Sta_Proc_InvMarked[dst] := false;
  Sta_Proc_CacheState[dst] := CACHE_E;
}


method n_NI_InvAckinv__109_0(                 
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
//case 1
requires ((Sta_Dir_InvSet[src] == true) && (Sta_Dir_Pending[0] == true) && (Sta_InvMsg_Cmd[src] == INV_InvAck)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_InvMsg_Cmd
{
  Sta_InvMsg_Cmd[src] := INV_None;
  Sta_Dir_InvSet[src] := false;
  if ((!(exists p  |0<= p<N0 :: ((!(p == src)) && (Sta_Dir_InvSet[p] == true)))) && (Sta_Dir_HomeInvSet[0] == false)) {
    Sta_Dir_Pending[0] := false;
    if ((Sta_Dir_Local[0] == true) && (Sta_Dir_Dirty[0] == false)) {
      Sta_Dir_Local[0] := false;
    }
  }
}

method n_NI_InvAckinv__109_1(                 
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_InvSet[src] == true) && (Sta_Dir_Pending[0] == true) && (Sta_InvMsg_Cmd[src] == INV_InvAck)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_InvMsg_Cmd
{
  Sta_InvMsg_Cmd[src] := INV_None;
  Sta_Dir_InvSet[src] := false;
  if ((!(exists p  |0<= p<N0 :: ((!(p == src)) && (Sta_Dir_InvSet[p] == true)))) && (Sta_Dir_HomeInvSet[0] == false)) {
    Sta_Dir_Pending[0] := false;
    if ((Sta_Dir_Local[0] == true) && (Sta_Dir_Dirty[0] == false)) {
      Sta_Dir_Local[0] := false;
    }
  }
}

method n_NI_InvAckinv__109_2(                 
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




































requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires ((Sta_Dir_InvSet[src] == true) && (Sta_Dir_Pending[0] == true) && (Sta_InvMsg_Cmd[src] == INV_InvAck)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_InvMsg_Cmd
{
  Sta_InvMsg_Cmd[src] := INV_None;
  Sta_Dir_InvSet[src] := false;
  if ((!(exists p  |0<= p<N0 :: ((!(p == src)) && (Sta_Dir_InvSet[p] == true)))) && (Sta_Dir_HomeInvSet[0] == false)) {
    Sta_Dir_Pending[0] := false;
    if ((Sta_Dir_Local[0] == true) && (Sta_Dir_Dirty[0] == false)) {
      Sta_Dir_Local[0] := false;
    }
  }
}


method n_NI_Replaceinv__109_0(          
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)






















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (Sta_Dir_ShrVld[0] == true)//branch
//case 1
requires (Sta_RpMsg_Cmd[src] == RP_Replace) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_RpMsg_Cmd
{
  Sta_RpMsg_Cmd[src] := RP_None;
  if (Sta_Dir_ShrVld[0] == true) {
    Sta_Dir_ShrSet[src] := false;
    Sta_Dir_InvSet[src] := false;
  }
}

method n_NI_Replaceinv__109_1(          
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)






















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv4
requires (!(Sta_Dir_ShrVld[0] == true))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires (Sta_RpMsg_Cmd[src] == RP_Replace) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_RpMsg_Cmd
{
  Sta_RpMsg_Cmd[src] := RP_None;
  if (Sta_Dir_ShrVld[0] == true) {
    Sta_Dir_ShrSet[src] := false;
    Sta_Dir_InvSet[src] := false;
  }
}

method n_NI_Replaceinv__109_2(          
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)






















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src==p__Inv3
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires (Sta_RpMsg_Cmd[src] == RP_Replace) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_RpMsg_Cmd
{
  Sta_RpMsg_Cmd[src] := RP_None;
  if (Sta_Dir_ShrVld[0] == true) {
    Sta_Dir_ShrSet[src] := false;
    Sta_Dir_InvSet[src] := false;
  }
}

method n_NI_Replaceinv__109_3(          
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)






















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires src!=p__Inv3&&src!=p__Inv4
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2
requires (Sta_RpMsg_Cmd[src] == RP_Replace) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_InvSet
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_RpMsg_Cmd
{
  Sta_RpMsg_Cmd[src] := RP_None;
  if (Sta_Dir_ShrVld[0] == true) {
    Sta_Dir_ShrSet[src] := false;
    Sta_Dir_InvSet[src] := false;
  }
}



method n_PI_Local_GetX_PutX__part__0()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_ShrVld[0] == true)))//case 3//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_I));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd{
  Sta_Dir_Local[0] := true;
  Sta_Dir_Dirty[0] := true;
  if (Sta_Dir_HeadVld[0] == true) {
    Sta_Dir_Pending[0] := true;
    Sta_Dir_HeadVld[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      if (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false))) {
        Sta_Dir_InvSet[p] := true;
        Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
        Sta_Dir_InvSet[p] := false;
        Sta_InvMsg_Cmd[p] := INV_None;
      }
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_HomeInvMsg_Cmd[0] := INV_None;
  }
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}

method n_PI_Local_GetX_PutX__part__0()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false))//branch
requires (!((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false)))//case 3//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_I));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd{
  Sta_Dir_Local[0] := true;
  Sta_Dir_Dirty[0] := true;
  if (Sta_Dir_HeadVld[0] == true) {
    Sta_Dir_Pending[0] := true;
    Sta_Dir_HeadVld[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      if (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false))) {
        Sta_Dir_InvSet[p] := true;
        Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
        Sta_Dir_InvSet[p] := false;
        Sta_InvMsg_Cmd[p] := INV_None;
      }
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_HomeInvMsg_Cmd[0] := INV_None;
  }
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}

method n_PI_Local_GetX_PutX__part__0()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true))//branch
//case 1//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_I));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd{
  Sta_Dir_Local[0] := true;
  Sta_Dir_Dirty[0] := true;
  if (Sta_Dir_HeadVld[0] == true) {
    Sta_Dir_Pending[0] := true;
    Sta_Dir_HeadVld[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      if (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false))) {
        Sta_Dir_InvSet[p] := true;
        Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
        Sta_Dir_InvSet[p] := false;
        Sta_InvMsg_Cmd[p] := INV_None;
      }
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_HomeInvMsg_Cmd[0] := INV_None;
  }
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}

method n_PI_Local_GetX_PutX__part__0()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true))//branch
//case 1//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_I));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd{
  Sta_Dir_Local[0] := true;
  Sta_Dir_Dirty[0] := true;
  if (Sta_Dir_HeadVld[0] == true) {
    Sta_Dir_Pending[0] := true;
    Sta_Dir_HeadVld[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      if (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false))) {
        Sta_Dir_InvSet[p] := true;
        Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
        Sta_Dir_InvSet[p] := false;
        Sta_InvMsg_Cmd[p] := INV_None;
      }
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_HomeInvMsg_Cmd[0] := INV_None;
  }
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}

method n_PI_Local_GetX_PutX__part__0()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true))//branch
//case 1//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_I));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd{
  Sta_Dir_Local[0] := true;
  Sta_Dir_Dirty[0] := true;
  if (Sta_Dir_HeadVld[0] == true) {
    Sta_Dir_Pending[0] := true;
    Sta_Dir_HeadVld[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      if (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false))) {
        Sta_Dir_InvSet[p] := true;
        Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
        Sta_Dir_InvSet[p] := false;
        Sta_InvMsg_Cmd[p] := INV_None;
      }
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_HomeInvMsg_Cmd[0] := INV_None;
  }
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}

method n_PI_Local_GetX_PutX__part__0()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true))//branch
//case 1//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_I));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd{
  Sta_Dir_Local[0] := true;
  Sta_Dir_Dirty[0] := true;
  if (Sta_Dir_HeadVld[0] == true) {
    Sta_Dir_Pending[0] := true;
    Sta_Dir_HeadVld[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      if (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false))) {
        Sta_Dir_InvSet[p] := true;
        Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
        Sta_Dir_InvSet[p] := false;
        Sta_InvMsg_Cmd[p] := INV_None;
      }
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_HomeInvMsg_Cmd[0] := INV_None;
  }
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}

method n_PI_Local_GetX_PutX__part__0()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires (!(Sta_Dir_HeadVld[0] == true))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_I));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd{
  Sta_Dir_Local[0] := true;
  Sta_Dir_Dirty[0] := true;
  if (Sta_Dir_HeadVld[0] == true) {
    Sta_Dir_Pending[0] := true;
    Sta_Dir_HeadVld[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      if (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false))) {
        Sta_Dir_InvSet[p] := true;
        Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
        Sta_Dir_InvSet[p] := false;
        Sta_InvMsg_Cmd[p] := INV_None;
      }
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_HomeInvMsg_Cmd[0] := INV_None;
  }
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}


method n_PI_Local_GetX_PutX__part__1()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p__Inv4] == true) && (Sta_Dir_HeadVld[0] == true))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_ShrVld[0] == true)))//case 3//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_S));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd{
  Sta_Dir_Local[0] := true;
  Sta_Dir_Dirty[0] := true;
  if (Sta_Dir_HeadVld[0] == true) {
    Sta_Dir_Pending[0] := true;
    Sta_Dir_HeadVld[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      if (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false))) {
        Sta_Dir_InvSet[p] := true;
        Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
        Sta_Dir_InvSet[p] := false;
        Sta_InvMsg_Cmd[p] := INV_None;
      }
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_HomeInvMsg_Cmd[0] := INV_None;
  }
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}

method n_PI_Local_GetX_PutX__part__1()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p__Inv4) && (Sta_Dir_HomeHeadPtr[0] == false))//branch
requires (!((Sta_Dir_Pending[0] == false) && (Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false)))//case 3//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_S));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd{
  Sta_Dir_Local[0] := true;
  Sta_Dir_Dirty[0] := true;
  if (Sta_Dir_HeadVld[0] == true) {
    Sta_Dir_Pending[0] := true;
    Sta_Dir_HeadVld[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      if (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false))) {
        Sta_Dir_InvSet[p] := true;
        Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
        Sta_Dir_InvSet[p] := false;
        Sta_InvMsg_Cmd[p] := INV_None;
      }
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_HomeInvMsg_Cmd[0] := INV_None;
  }
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}

method n_PI_Local_GetX_PutX__part__1()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true))//branch
//case 1//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_S));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd{
  Sta_Dir_Local[0] := true;
  Sta_Dir_Dirty[0] := true;
  if (Sta_Dir_HeadVld[0] == true) {
    Sta_Dir_Pending[0] := true;
    Sta_Dir_HeadVld[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      if (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false))) {
        Sta_Dir_InvSet[p] := true;
        Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
        Sta_Dir_InvSet[p] := false;
        Sta_InvMsg_Cmd[p] := INV_None;
      }
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_HomeInvMsg_Cmd[0] := INV_None;
  }
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}

method n_PI_Local_GetX_PutX__part__1()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HeadPtr[0] == p__Inv4)) && (Sta_Dir_HeadVld[0] == true))//branch
//case 1//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_S));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd{
  Sta_Dir_Local[0] := true;
  Sta_Dir_Dirty[0] := true;
  if (Sta_Dir_HeadVld[0] == true) {
    Sta_Dir_Pending[0] := true;
    Sta_Dir_HeadVld[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      if (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false))) {
        Sta_Dir_InvSet[p] := true;
        Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
        Sta_Dir_InvSet[p] := false;
        Sta_InvMsg_Cmd[p] := INV_None;
      }
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_HomeInvMsg_Cmd[0] := INV_None;
  }
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}

method n_PI_Local_GetX_PutX__part__1()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((!(Sta_Dir_ShrVld[0] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true))//branch
//case 1//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_S));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd{
  Sta_Dir_Local[0] := true;
  Sta_Dir_Dirty[0] := true;
  if (Sta_Dir_HeadVld[0] == true) {
    Sta_Dir_Pending[0] := true;
    Sta_Dir_HeadVld[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      if (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false))) {
        Sta_Dir_InvSet[p] := true;
        Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
        Sta_Dir_InvSet[p] := false;
        Sta_InvMsg_Cmd[p] := INV_None;
      }
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_HomeInvMsg_Cmd[0] := INV_None;
  }
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}

method n_PI_Local_GetX_PutX__part__1()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((!(Sta_Dir_ShrSet[p__Inv4] == true)) && (!(Sta_Dir_HomeHeadPtr[0] == false)) && (Sta_Dir_HeadVld[0] == true))//branch
//case 1//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_S));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd{
  Sta_Dir_Local[0] := true;
  Sta_Dir_Dirty[0] := true;
  if (Sta_Dir_HeadVld[0] == true) {
    Sta_Dir_Pending[0] := true;
    Sta_Dir_HeadVld[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      if (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false))) {
        Sta_Dir_InvSet[p] := true;
        Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
        Sta_Dir_InvSet[p] := false;
        Sta_InvMsg_Cmd[p] := INV_None;
      }
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_HomeInvMsg_Cmd[0] := INV_None;
  }
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}

method n_PI_Local_GetX_PutX__part__1()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires (!(Sta_Dir_HeadVld[0] == true))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true))) //case 2//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_S));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HeadVld
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeInvMsg_Cmd
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_InvMsg_Cmd{
  Sta_Dir_Local[0] := true;
  Sta_Dir_Dirty[0] := true;
  if (Sta_Dir_HeadVld[0] == true) {
    Sta_Dir_Pending[0] := true;
    Sta_Dir_HeadVld[0] := false;
    Sta_Dir_ShrVld[0] := false;
    forall p  |0<= p<N0 {
      Sta_Dir_ShrSet[p] := false;
      if (((Sta_Dir_ShrVld[0] == true) && (Sta_Dir_ShrSet[p] == true)) || (((Sta_Dir_HeadVld[0] == true) && (Sta_Dir_HeadPtr[0] == p)) && (Sta_Dir_HomeHeadPtr[0] == false))) {
        Sta_Dir_InvSet[p] := true;
        Sta_InvMsg_Cmd[p] := INV_Inv;}
else{
        Sta_Dir_InvSet[p] := false;
        Sta_InvMsg_Cmd[p] := INV_None;
      }
    }
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
    Sta_HomeInvMsg_Cmd[0] := INV_None;
  }
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}


method n_NI_ShWb()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((p__Inv4 == Sta_ShWbMsg_Proc[0]) && (Sta_ShWbMsg_HomeProc[0] == false))//branch
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_ShWbMsg_Cmd[0] == SHWB_ShWb)))//case 3//guard condition
requires   (Sta_ShWbMsg_Cmd[0] == SHWB_ShWb);
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc{
  Sta_ShWbMsg_Cmd[0] := SHWB_None;
  Sta_Dir_Pending[0] := false;
  Sta_Dir_Dirty[0] := false;
  Sta_Dir_ShrVld[0] := true;
  forall p  |0<= p<N0 {
    if (((p == Sta_ShWbMsg_Proc[0]) && (Sta_ShWbMsg_HomeProc[0] == false)) || (Sta_Dir_ShrSet[p] == true)) {
      Sta_Dir_ShrSet[p] := true;
      Sta_Dir_InvSet[p] := true;}
else{
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
  }
  if ((Sta_ShWbMsg_HomeProc[0] == true) || (Sta_Dir_HomeShrSet[0] == true)) {
    Sta_Dir_HomeShrSet[0] := true;
    Sta_Dir_HomeInvSet[0] := true;}
else{
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
  }
}

method n_NI_ShWb()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires (Sta_Dir_ShrSet[p__Inv4] == true)//branch
requires (!((Sta_ShWbMsg_Cmd[0] == SHWB_ShWb) && (Sta_Dir_ShrSet[p__Inv4] == true)))//case 3//guard condition
requires   (Sta_ShWbMsg_Cmd[0] == SHWB_ShWb);
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc{
  Sta_ShWbMsg_Cmd[0] := SHWB_None;
  Sta_Dir_Pending[0] := false;
  Sta_Dir_Dirty[0] := false;
  Sta_Dir_ShrVld[0] := true;
  forall p  |0<= p<N0 {
    if (((p == Sta_ShWbMsg_Proc[0]) && (Sta_ShWbMsg_HomeProc[0] == false)) || (Sta_Dir_ShrSet[p] == true)) {
      Sta_Dir_ShrSet[p] := true;
      Sta_Dir_InvSet[p] := true;}
else{
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
  }
  if ((Sta_ShWbMsg_HomeProc[0] == true) || (Sta_Dir_HomeShrSet[0] == true)) {
    Sta_Dir_HomeShrSet[0] := true;
    Sta_Dir_HomeInvSet[0] := true;}
else{
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
  }
}

method n_NI_ShWb()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((!(p__Inv4 == Sta_ShWbMsg_Proc[0])) && (!(Sta_Dir_ShrSet[p__Inv4] == true)))//branch
//case 1//guard condition
requires   (Sta_ShWbMsg_Cmd[0] == SHWB_ShWb);
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc{
  Sta_ShWbMsg_Cmd[0] := SHWB_None;
  Sta_Dir_Pending[0] := false;
  Sta_Dir_Dirty[0] := false;
  Sta_Dir_ShrVld[0] := true;
  forall p  |0<= p<N0 {
    if (((p == Sta_ShWbMsg_Proc[0]) && (Sta_ShWbMsg_HomeProc[0] == false)) || (Sta_Dir_ShrSet[p] == true)) {
      Sta_Dir_ShrSet[p] := true;
      Sta_Dir_InvSet[p] := true;}
else{
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
  }
  if ((Sta_ShWbMsg_HomeProc[0] == true) || (Sta_Dir_HomeShrSet[0] == true)) {
    Sta_Dir_HomeShrSet[0] := true;
    Sta_Dir_HomeInvSet[0] := true;}
else{
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
  }
}

method n_NI_ShWb()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0

requires ((!(Sta_ShWbMsg_HomeProc[0] == false)) && (!(Sta_Dir_ShrSet[p__Inv4] == true)))//branch
//case 1//guard condition
requires   (Sta_ShWbMsg_Cmd[0] == SHWB_ShWb);
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_InvSet
modifies Sta_Dir_Pending
modifies Sta_Dir_ShrSet
modifies Sta_Dir_ShrVld
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc{
  Sta_ShWbMsg_Cmd[0] := SHWB_None;
  Sta_Dir_Pending[0] := false;
  Sta_Dir_Dirty[0] := false;
  Sta_Dir_ShrVld[0] := true;
  forall p  |0<= p<N0 {
    if (((p == Sta_ShWbMsg_Proc[0]) && (Sta_ShWbMsg_HomeProc[0] == false)) || (Sta_Dir_ShrSet[p] == true)) {
      Sta_Dir_ShrSet[p] := true;
      Sta_Dir_InvSet[p] := true;}
else{
      Sta_Dir_ShrSet[p] := false;
      Sta_Dir_InvSet[p] := false;
    }
  }
  if ((Sta_ShWbMsg_HomeProc[0] == true) || (Sta_Dir_HomeShrSet[0] == true)) {
    Sta_Dir_HomeShrSet[0] := true;
    Sta_Dir_HomeInvSet[0] := true;}
else{
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
  }
}

method n_NI_Remote_GetX_PutX_Homeinv__109_0(           
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself

requires ((Sta_HomeUniMsg_Cmd[0] == UNI_GetX) && (Sta_HomeUniMsg_HomeProc[0] == false) && (Sta_HomeUniMsg_Proc[0] == dst) && (Sta_Proc_CacheState[dst] == CACHE_E)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_HomeUniMsg_Cmd
modifies Sta_Proc_CacheState
{
  Sta_Proc_CacheState[dst] := CACHE_I;
  Sta_HomeUniMsg_Cmd[0] := UNI_PutX;
}



method n_NI_Wb()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself
//guard condition
requires   (Sta_WbMsg_Cmd[0] == WB_Wb);
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadVld
modifies Sta_WbMsg_Cmd{
  Sta_WbMsg_Cmd[0] := WB_None;
  Sta_Dir_Dirty[0] := false;
  Sta_Dir_HeadVld[0] := false;
}


method n_PI_Local_GetX_GetX__part__1()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself
//guard condition
requires   ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_S));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_HomeProc_ProcCmd
modifies Sta_HomeUniMsg_Cmd
modifies Sta_HomeUniMsg_HomeProc
modifies Sta_HomeUniMsg_Proc{
  Sta_HomeProc_ProcCmd[0] := NODE_GetX;
  Sta_Dir_Pending[0] := true;
  Sta_HomeUniMsg_Cmd[0] := UNI_GetX;
  Sta_HomeUniMsg_Proc[0] := Sta_Dir_HeadPtr[0];
  Sta_HomeUniMsg_HomeProc[0] := Sta_Dir_HomeHeadPtr[0];
}


method n_PI_Local_GetX_GetX__part__0()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself
//guard condition
requires   ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_ProcCmd[0] == NODE_None) && (Sta_HomeProc_CacheState[0] == CACHE_I));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_HomeProc_ProcCmd
modifies Sta_HomeUniMsg_Cmd
modifies Sta_HomeUniMsg_HomeProc
modifies Sta_HomeUniMsg_Proc{
  Sta_HomeProc_ProcCmd[0] := NODE_GetX;
  Sta_Dir_Pending[0] := true;
  Sta_HomeUniMsg_Cmd[0] := UNI_GetX;
  Sta_HomeUniMsg_Proc[0] := Sta_Dir_HeadPtr[0];
  Sta_HomeUniMsg_HomeProc[0] := Sta_Dir_HomeHeadPtr[0];
}

method n_PI_Remote_Replaceinv__109_0(         
src:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)




















requires 0<=src<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself

requires ((Sta_Proc_CacheState[src] == CACHE_S) && (Sta_Proc_ProcCmd[src] == NODE_None)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_RpMsg_Cmd
{
  Sta_Proc_CacheState[src] := CACHE_I;
  Sta_RpMsg_Cmd[src] := RP_Replace;
}



method n_PI_Local_Replace()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself
//guard condition
requires   ((Sta_HomeProc_CacheState[0] == CACHE_S) && (Sta_HomeProc_ProcCmd[0] == NODE_None));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Local
modifies Sta_HomeProc_CacheState{
  Sta_Dir_Local[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_I;
}

method n_PI_Remote_PutXinv__109_0(            
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself

requires ((Sta_Proc_CacheState[dst] == CACHE_E) && (Sta_Proc_ProcCmd[dst] == NODE_None)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Proc_CacheState
modifies Sta_WbMsg_Cmd
modifies Sta_WbMsg_HomeProc
modifies Sta_WbMsg_Proc
{
  Sta_Proc_CacheState[dst] := CACHE_I;
  Sta_WbMsg_Cmd[0] := WB_Wb;
  Sta_WbMsg_Proc[0] := dst;
  Sta_WbMsg_HomeProc[0] := false;
}


method n_NI_Remote_Get_Put_Homeinv__109_0(           
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)
























requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself

requires ((Sta_HomeUniMsg_Cmd[0] == UNI_Get) && (Sta_HomeUniMsg_HomeProc[0] == false) && (Sta_HomeUniMsg_Proc[0] == dst) && (Sta_Proc_CacheState[dst] == CACHE_E)) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_HomeUniMsg_Cmd
modifies Sta_Proc_CacheState
{
  Sta_Proc_CacheState[dst] := CACHE_S;
  Sta_HomeUniMsg_Cmd[0] := UNI_Put;
}


method n_NI_Invinv__109_0(          
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)






















requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself

requires (Sta_InvMsg_Cmd[dst] == INV_Inv) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_InvMsg_Cmd
modifies Sta_Proc_CacheState
modifies Sta_Proc_InvMarked
modifies Sta_Proc_ProcCmd
{
  Sta_InvMsg_Cmd[dst] := INV_InvAck;
  Sta_Proc_CacheState[dst] := CACHE_I;
  if (Sta_Proc_ProcCmd[dst] == NODE_Get) {
    Sta_Proc_InvMarked[dst] := true;
  }
}



method n_PI_Local_PutX()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself
//guard condition
requires   ((Sta_HomeProc_CacheState[0] == CACHE_E) && (Sta_HomeProc_ProcCmd[0] == NODE_None));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_HomeProc_CacheState{
  if (Sta_Dir_Pending[0] == true) {
    Sta_HomeProc_CacheState[0] := CACHE_I;
    Sta_Dir_Dirty[0] := false;}
else{
    Sta_HomeProc_CacheState[0] := CACHE_I;
    Sta_Dir_Local[0] := false;
    Sta_Dir_Dirty[0] := false;
  }
}


method n_PI_Local_Get_Put()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself
//guard condition
requires   ((Sta_Dir_Dirty[0] == false) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_CacheState[0] == CACHE_I) && (Sta_HomeProc_ProcCmd[0] == NODE_None));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Local
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd{
  Sta_Dir_Local[0] := true;
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  if (Sta_HomeProc_InvMarked[0] == true) {
    Sta_HomeProc_InvMarked[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    Sta_HomeProc_CacheState[0] := CACHE_S;
  }
}

method n_NI_Remote_GetX_Nak_Homeinv__109_0(            
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself

requires ((Sta_HomeUniMsg_Cmd[0] == UNI_GetX) && (Sta_HomeUniMsg_HomeProc[0] == false) && (Sta_HomeUniMsg_Proc[0] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_HomeUniMsg_Cmd
modifies Sta_NakcMsg_Cmd
{
  Sta_HomeUniMsg_Cmd[0] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}



method n_NI_Local_PutXAcksDone()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself
//guard condition
requires   (Sta_HomeUniMsg_Cmd[0] == UNI_PutX);
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadVld
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_HomeUniMsg_Cmd{
  Sta_HomeUniMsg_Cmd[0] := UNI_None;
  Sta_Dir_Pending[0] := false;
  Sta_Dir_Local[0] := true;
  Sta_Dir_HeadVld[0] := false;
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
  Sta_HomeProc_CacheState[0] := CACHE_E;
}

method n_NI_Remote_Get_Nak_Homeinv__109_0(            
dst:nat, N0:nat,p__Inv3:nat,p__Inv4:nat)


























requires 0<=dst<N0
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself

requires ((Sta_HomeUniMsg_Cmd[0] == UNI_Get) && (Sta_HomeUniMsg_HomeProc[0] == false) && (Sta_HomeUniMsg_Proc[0] == dst) && (!(Sta_Proc_CacheState[dst] == CACHE_E))) //guard condition
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_HomeUniMsg_Cmd
modifies Sta_NakcMsg_Cmd
{
  Sta_HomeUniMsg_Cmd[0] := UNI_Nak;
  Sta_NakcMsg_Cmd[0] := NAKC_Nakc;
}



method n_NI_Replace_Home()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself
//guard condition
requires   (Sta_HomeRpMsg_Cmd[0] == RP_Replace);
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HomeInvSet
modifies Sta_Dir_HomeShrSet
modifies Sta_Dir_ShrVld
modifies Sta_HomeRpMsg_Cmd{
  Sta_HomeRpMsg_Cmd[0] := RP_None;
  if (Sta_Dir_ShrVld[0] == true) {
    Sta_Dir_HomeShrSet[0] := false;
    Sta_Dir_HomeInvSet[0] := false;
  }
}


method n_NI_Local_Put()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself
//guard condition
requires   (Sta_HomeUniMsg_Cmd[0] == UNI_Put);
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_Local
modifies Sta_Dir_Pending
modifies Sta_HomeProc_CacheState
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_HomeUniMsg_Cmd{
  Sta_HomeUniMsg_Cmd[0] := UNI_None;
  Sta_Dir_Pending[0] := false;
  Sta_Dir_Dirty[0] := false;
  Sta_Dir_Local[0] := true;
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  if (Sta_HomeProc_InvMarked[0] == true) {
    Sta_HomeProc_InvMarked[0] := false;
    Sta_HomeProc_CacheState[0] := CACHE_I;}
else{
    Sta_HomeProc_CacheState[0] := CACHE_S;
  }
}


method n_NI_Nak_Clear()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself
//guard condition
requires   (Sta_NakcMsg_Cmd[0] == NAKC_Nakc);
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Pending
modifies Sta_NakcMsg_Cmd{
  Sta_NakcMsg_Cmd[0] := NAKC_None;
  Sta_Dir_Pending[0] := false;
}


method n_PI_Local_Get_Get()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself
//guard condition
requires   ((Sta_Dir_Dirty[0] == true) && (Sta_Dir_Pending[0] == false) && (Sta_HomeProc_CacheState[0] == CACHE_I) && (Sta_HomeProc_ProcCmd[0] == NODE_None));
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_HomeProc_ProcCmd
modifies Sta_HomeUniMsg_Cmd
modifies Sta_HomeUniMsg_HomeProc
modifies Sta_HomeUniMsg_Proc{
  Sta_HomeProc_ProcCmd[0] := NODE_Get;
  Sta_Dir_Pending[0] := true;
  Sta_HomeUniMsg_Cmd[0] := UNI_Get;
  Sta_HomeUniMsg_Proc[0] := Sta_Dir_HeadPtr[0];
  Sta_HomeUniMsg_HomeProc[0] := Sta_Dir_HomeHeadPtr[0];
}


method n_NI_Nak_Home()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself
//guard condition
requires   (Sta_HomeUniMsg_Cmd[0] == UNI_Nak);
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_HomeProc_InvMarked
modifies Sta_HomeProc_ProcCmd
modifies Sta_HomeUniMsg_Cmd{
  Sta_HomeUniMsg_Cmd[0] := UNI_None;
  Sta_HomeProc_ProcCmd[0] := NODE_None;
  Sta_HomeProc_InvMarked[0] := false;
}


method n_NI_FAck()
requires p__Inv3!=p__Inv4&&p__Inv4<N0&& p__Inv3<N0
requires (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))//statement has nothing with prop--it guranttee itself
//guard condition
requires   (Sta_ShWbMsg_Cmd[0] == SHWB_FAck);
ensures (!((Sta_UniMsg_Cmd[p__Inv3] == UNI_Get) && (Sta_UniMsg_HomeProc[p__Inv3] == false) && (Sta_Dir_InvSet[p__Inv4] == true)))
modifies Sta_Dir_Dirty
modifies Sta_Dir_HeadPtr
modifies Sta_Dir_HomeHeadPtr
modifies Sta_Dir_Pending
modifies Sta_ShWbMsg_Cmd
modifies Sta_ShWbMsg_HomeProc
modifies Sta_ShWbMsg_Proc{
  Sta_ShWbMsg_Cmd[0] := SHWB_None;
  Sta_Dir_Pending[0] := false;
  if (Sta_Dir_Dirty[0] == true) {
    Sta_Dir_HeadPtr[0] := Sta_ShWbMsg_Proc[0];
    Sta_Dir_HomeHeadPtr[0] := Sta_ShWbMsg_HomeProc[0];
  }
}

